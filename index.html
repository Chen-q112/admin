<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªç„¶å…ƒç´ ç¢°æ’å®éªŒå®¤ </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            height: 1000px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .game-container {
            width: 100%;
			height: 1000px;
            max-width: 100000px;
            height: 95vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
            padding: 25px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 25px;
            width: 95%;
            backdrop-filter: blur(12px);
            border: 2px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }

        .header h1 {
            font-size: 3.5rem;
            text-shadow: 0 0 20px , 0 0 40px ;
            margin-bottom: 15px;
            letter-spacing: 1.5px;
            background: linear-gradient(to right, #ff8a00, #da1b60, #00c3ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }

        .header p {
            font-size: 1.4rem;
            max-width: 950px;
            margin: 0 auto;
            line-height: 1.8;
            color: #e0f7fa;
        }

        .game-area {
            display: flex;
            width: 100%;
            height: 75%;
            justify-content: space-between;
            align-items: center;
            gap: 25px;
        }

        .elements-container {
            width: 18%;
            height: 95%;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 25px;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            backdrop-filter: blur(12px);
            border: 2px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            overflow-y: auto;
        }

        .elements-container::-webkit-scrollbar {
            width: 10px;
        }

        .elements-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }

        .elements-container::-webkit-scrollbar-thumb {
            background: rgba(100, 217, 255, 0.6);
            border-radius: 5px;
        }

        .element {
            width: 130px;
            height: 130px;
            border-radius: 25px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 3.5rem;
            cursor: grab;
            transition: all 0.3s ease;
            position: relative;
            margin: 20px auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            color: white;
            user-select: none;
            transform-style: preserve-3d;
        }

        .element:hover {
            transform: scale(1.12) translateY(-8px);
            filter: brightness(1.25);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);
        }

        .element-name {
            position: absolute;
            bottom: -35px;
            font-size: 1.3rem;
            text-shadow: 0 0 8px black;
            font-weight: bold;
            white-space: nowrap;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 15px;
            border-radius: 12px;
        }

        .reaction-area {
            width: 60%;
            height: 95%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .reaction-circle {
            width: 420px;
            height: 420px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.2) 70%);
            border: 5px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 50px rgba(0, 238, 255, 0.8),
                        inset 0 0 50px rgba(0, 238, 255, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .reaction-result {
            position: absolute;
            font-size: 6rem;
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
            text-shadow: 0 0 30px currentColor;
            pointer-events: none;
            z-index: 10;
            transform: scale(0.8);
        }

        .reaction-text {
            position: absolute;
            bottom: -80px;
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            width: 100%;
            opacity: 0;
            transition: opacity 0.5s;
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.9);
            pointer-events: none;
            z-index: 10;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 18px;
            max-width: 85%;
            margin: 0 auto;
        }

        .instructions {
            position: absolute;
            bottom: 40px;
            background: rgba(0, 0, 0, 0.6);
            padding: 18px 40px;
            border-radius: 18px;
            font-size: 1.4rem;
            text-align: center;
            max-width: 92%;
            backdrop-filter: blur(12px);
            border: 2px solid rgba(255, 255, 255, 0.2);
			margin-top: 150px;
        }

        /* å…ƒç´ é¢œè‰²å®šä¹‰ */
        .fire { background: linear-gradient(135deg, #ff512f, #f09819); }
        .water { background: linear-gradient(135deg, #1a2980, #26d0ce); }
        .electric { background: linear-gradient(135deg, #f5af19, #f12711); }
        .wind { background: linear-gradient(135deg, #56ccf2, #2f80ed); }
        .earth { background: linear-gradient(135deg, #834d9b, #d04ed6); }
        .ice { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .light { background: linear-gradient(135deg, #f6d365, #fda085); }
        .plant { background: linear-gradient(135deg, #0ba360, #3cba92); }
        .lava { background: linear-gradient(135deg, #f46b45, #eea849); }
        .sand { background: linear-gradient(135deg, #f5d76e, #d4c17f); }
        .metal { background: linear-gradient(135deg, #616161, #9bc5c3); }
        .cloud { background: linear-gradient(135deg, #bdc3c7, #2c3e50); }
        .mountain { background: linear-gradient(135deg, #8e9eab, #eef2f3); }
        .ocean { background: linear-gradient(135deg, #1a2980, #26d0ce); }
        .mineral { background: linear-gradient(135deg, #8e2de2, #4a00e0); }
        .storm { background: linear-gradient(135deg, #373B44, #4286f4); }
        .crystal { background: linear-gradient(135deg, #0cebeb, #20e3b2, #29ffc6); }

        .element.dragging {
            opacity: 0.8;
            transform: scale(1.15);
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.95);
            z-index: 100;
        }

        .reaction-circle .element {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: float 3s infinite ease-in-out;
            z-index: 5;
        }

        @keyframes float {
            0%, 100% { transform: translate(-50%, -55%); }
            50% { transform: translate(-50%, -45%); }
        }

        .particle {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            z-index: 1;
        }

        .reset-btn {
            position: absolute;
            top: 30px;
            left: 30px;
            background: rgba(255, 50, 50, 0.5);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
            transition: all 0.3s;
            backdrop-filter: blur(6px);
            border: 2px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .reset-btn:hover {
            background: rgba(255, 80, 80, 0.7);
            transform: scale(1.08);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }

        .reaction-history {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.6);
            padding: 20px;
            border-radius: 25px;
            width: 280px;
            max-height: 220px;
            overflow-y: auto;
            backdrop-filter: blur(12px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }

        .reaction-history h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #00eeff;
            font-size: 1.5rem;
            text-shadow: 0 0 15px rgba(0, 238, 255, 0.8);
        }

        .history-item {
            padding: 10px 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.15);
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-item i {
            font-size: 1.3rem;
        }

        .element-counter {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 1rem;
            z-index: 20;
            border: 1px solid rgba(255, 255, 255, 0.2);
			margin-left: 150px;
        }

        .reaction-circle::before {
            content: '';
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            border-radius: 50%;
            background: radial-gradient(circle, transparent 40%, rgba(0, 238, 255, 0.15) 100%);
            z-index: -1;
            animation: pulse 4s infinite ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.08); opacity: 1; }
        }

        .drop-zone-active {
            animation: pulse-glow 1.5s infinite alternate;
            box-shadow: 0 0 60px rgba(0, 238, 255, 1),
                        inset 0 0 60px rgba(0, 238, 255, 0.7) !important;
        }

        @keyframes pulse-glow {
            from { box-shadow: 0 0 50px rgba(0, 238, 255, 0.8), inset 0 0 50px rgba(0, 238, 255, 0.5); }
            to { box-shadow: 0 0 70px rgba(0, 238, 255, 1), inset 0 0 70px rgba(0, 238, 255, 0.8); }
        }

        .drop-hint {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.8rem;
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            pointer-events: none;
            transition: opacity 0.3s;
            width: 80%;
            z-index: 2;
        }

        .elements-in-circle .drop-hint {
            opacity: 0;
        }

        .reaction-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .reaction-popup.active {
            opacity: 1;
        }

        .popup-content {
            background: rgba(0, 0, 0, 0.85);
            padding: 40px 60px;
            border-radius: 25px;
            text-align: center;
            backdrop-filter: blur(15px);
            border: 3px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 50px rgba(0, 238, 255, 0.7);
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
			
        }

        .reaction-popup.active .popup-content {
            transform: scale(1);
            opacity: 1;
        }

        .popup-emoji {
            font-size: 8rem;
            margin-bottom: 25px;
            text-shadow: 0 0 30px currentColor;
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.4s 0.1s;
        }

        .reaction-popup.active .popup-emoji {
            transform: scale(1);
            opacity: 1;
        }

        .popup-text {
            font-size: 3rem;
            font-weight: bold;
            color: white;
            max-width: 800px;
            line-height: 1.4;
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.4s 0.2s;
        }

        .reaction-popup.active .popup-text {
            transform: translateY(0);
            opacity: 1;
        }

        @keyframes lightning {
            0%, 100% { opacity: 0; }
            10%, 30%, 50%, 70%, 90% { opacity: 1; }
        }
        
        @keyframes explosion {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }
        
        @keyframes grow {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        .sound-btn {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.8rem;
            transition: all 0.3s;
            backdrop-filter: blur(6px);
            border: 2px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .sound-btn:hover {
            background: rgba(100, 100, 255, 0.7);
            transform: scale(1.08);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }

        @media (max-width: 1200px) {
            .game-area {
                flex-direction: column;
                height: 85%;
            }
            
            .elements-container {
                width: 95%;
                height: 22%;
                flex-direction: row;
                padding: 15px;
            }
            
            .element {
                width: 90px;
                height: 90px;
                margin: 0 10px;
                font-size: 2.5rem;
            }
            
            .element-name {
                font-size: 1rem;
                bottom: -22px;
                padding: 3px 10px;
            }
            
            .reaction-area {
                width: 95%;
                height: 50%;
            }
            
            .reaction-circle {
                width: 320px;
                height: 320px;
            }
            
            .instructions {
                bottom: 20px;
                font-size: 1.2rem;
                padding: 15px 25px;
            }
            
            .reaction-history {
                position: relative;
                width: 92%;
                max-height: 140px;
                top: 0;
                right: 0;
                margin-top: 20px;
            }
            
            .header {
                padding-top: 60px;
            }
            
            .reset-btn {
                top: 15px;
                left: 50%;
                transform: translateX(-50%);
                padding: 12px 25px;
			
            }
            
            .sound-btn {
                top: 15px;
                right: 15px;
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }
            
            .header h1 {
                font-size: 2.8rem;
            }
            
            .header p {
                font-size: 1.2rem;
            }
            
            .popup-content {
                padding: 30px 40px;
                width: 90%;
            }
            
            .popup-emoji {
                font-size: 5rem;
            }
            
            .popup-text {
                font-size: 2rem;
            }
			.card {
			    background: rgba(255, 255, 255, 0.1);
			    backdrop-filter: blur(10px);
			    border-radius: 15px;
			    padding: 25px;
			    width: 350px;
			    border: 1px solid rgba(255, 255, 255, 0.15);
			    transition: transform 0.3s ease;
			}
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>è‡ªç„¶å…ƒç´ ç¢°æ’å®éªŒå®¤ </h1>
            <p>ä»ä¸¤ä¾§é€‰æ‹©è‡ªç„¶å…ƒç´ å¹¶æ‹–åŠ¨åˆ°ä¸­å¤®ååº”åŒºã€‚å°†ä¸¤ä¸ªå…ƒç´ ç»„åˆåœ¨ä¸€èµ·ï¼Œè§‚å¯Ÿå®ƒä»¬ä¹‹é—´çš„ç¥å¥‡ååº”ï¼æ¢ç´¢è‡ªç„¶ç•Œä¸­å…ƒç´ ç»„åˆäº§ç”Ÿçš„å„ç§ç°è±¡ã€‚</p>
        </div>
        
        <div class="game-area">
            <div class="elements-container left-elements">
                <div class="element fire" draggable="true" data-element="fire">
                    <i class="fas fa-fire"></i>
                    <div class="element-name">ç«ç„°</div>
                </div>
                <div class="element water" draggable="true" data-element="water">
                    <i class="fas fa-tint"></i>
                    <div class="element-name">æ°´æµ</div>
                </div>
                <div class="element electric" draggable="true" data-element="electric">
                    <i class="fas fa-bolt"></i>
                    <div class="element-name">é›·ç”µ</div>
                </div>
                <div class="element plant" draggable="true" data-element="plant">
                    <i class="fas fa-leaf"></i>
                    <div class="element-name">æ¤ç‰©</div>
                </div>
                <div class="element light" draggable="true" data-element="light">
                    <i class="fas fa-sun"></i>
                    <div class="element-name">é˜³å…‰</div>
                </div>
                <div class="element mineral" draggable="true" data-element="mineral">
                    <i class="fas fa-gem"></i>
                    <div class="element-name">çŸ¿ç‰©</div>
                </div>
                <div class="element storm" draggable="true" data-element="storm">
                    <i class="fas fa-cloud-showers-heavy"></i>
                    <div class="element-name">é£æš´</div>
                </div>
                
            </div>
            
            <div class="reaction-area">
                <div class="reaction-circle" id="reactionCircle">
                    <div class="element-counter" id="elementCounter">å…ƒç´ : 0/2</div>
                    <div class="drop-hint">å°†å…ƒç´ æ‹–æ”¾åˆ°æ­¤å¤„è¿›è¡Œç»„åˆ</div>
                </div>
            </div>
            
            <div class="elements-container right-elements">
                <div class="element wind" draggable="true" data-element="wind">
                    <i class="fas fa-wind"></i>
                    <div class="element-name">é£</div>
                </div>
                <div class="element earth" draggable="true" data-element="earth">
                    <i class="fas fa-mountain"></i>
                    <div class="element-name">åœŸå£¤</div>
                </div>
                <div class="element ice" draggable="true" data-element="ice">
                    <i class="fas fa-snowflake"></i>
                    <div class="element-name">å†°é›ª</div>
                </div>
                <div class="element lava" draggable="true" data-element="lava">
                    <i class="fas fa-fire-alt"></i>
                    <div class="element-name">ç†”å²©</div>
                </div>
                <div class="element sand" draggable="true" data-element="sand">
                    <i class="fas fa-wind"></i>
                    <div class="element-name">æ²™å°˜</div>
                </div>
                <div class="element ocean" draggable="true" data-element="ocean">
                    <i class="fas fa-water"></i>
                    <div class="element-name">æµ·æ´‹</div>
                </div>
                <div class="element metal" draggable="true" data-element="metal">
                    <i class="fas fa-hammer"></i>
                    <div class="element-name">é‡‘å±</div>
                </div>
                <div class="element cloud" draggable="true" data-element="cloud">
                    <i class="fas fa-cloud"></i>
                    <div class="element-name">äº‘æœµ</div>
                </div>
                <div class="element crystal" draggable="true" data-element="crystal">
                    <i class="fas fa-diamond"></i>
                    <div class="element-name">æ°´æ™¶</div>
                </div>
            </div>
        </div>
        
        <div class="reaction-history">
            <h3><i class="fas fa-clipboard-list"></i> ååº”è®°å½•</h3>
            <div id="historyList"></div>
        </div>
        
        <button class="reset-btn" id="resetBtn"><i class="fas fa-redo"></i> é‡ç½®å®éªŒ</button>
	
		 
       
        
        <div class="instructions">
            <i class="fas fa-lightbulb"></i> æç¤ºï¼šæ‹–åŠ¨ä¸¤ä¸ªå…ƒç´ åˆ°ä¸­å¤®åœ†åœˆå†…ï¼Œè§‚å¯Ÿå®ƒä»¬ä¹‹é—´çš„è‡ªç„¶ååº”ï¼å°è¯•ä¸åŒçš„ç»„åˆå‘ç°éšè—çš„è‡ªç„¶ç°è±¡ã€‚<br />è¿˜æœ‰ä¸€äº›åœ¨è‡ªç„¶ä¸­æ‰å­˜åœ¨çš„ç°è±¡ï¼Œä½ å¯ä»¥å»äº²è‡ªå»çœ‹çœ‹ã€‚
        </div>
      

        <div class="reaction-popup" id="reactionPopup">
            <div class="popup-content">
                <div class="popup-emoji" id="popupEmoji"></div>
                <div class="popup-text" id="popupText"></div>
            </div>
        </div>
		
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const elements = document.querySelectorAll('.element');
            const reactionCircle = document.getElementById('reactionCircle');
            const resetBtn = document.getElementById('resetBtn');
            const soundBtn = document.getElementById('soundBtn');
            const historyList = document.getElementById('historyList');
            const elementCounter = document.getElementById('elementCounter');
            const dropHint = document.querySelector('.drop-hint');
            const reactionPopup = document.getElementById('reactionPopup');
            const popupEmoji = document.getElementById('popupEmoji');
            const popupText = document.getElementById('popupText');
            
            let draggedElement = null;
            let elementsInCircle = [];
            let reactionHistory = [];
            

            function initGame() {

                reactionCircle.querySelectorAll('.dynamic-element, .particle').forEach(el => el.remove());
                reactionCircle.classList.remove('elements-in-circle');
                

                elementsInCircle = [];
                reactionHistory = [];
                historyList.innerHTML = '';
                updateElementCounter();
                

                addHistory("å®éªŒå¼€å§‹ï¼å°è¯•ç»„åˆè‡ªç„¶å…ƒç´ ");
            }
    
            function updateElementCounter() {
                elementCounter.textContent = `å…ƒç´ : ${elementsInCircle.length}/2`;
                if (elementsInCircle.length > 0) {
                    reactionCircle.classList.add('elements-in-circle');
                } else {
                    reactionCircle.classList.remove('elements-in-circle');
                }
            }
            

            function addHistory(text, icon = "fas fa-flask") {
                reactionHistory.unshift({text, icon});
                if (reactionHistory.length > 12) {
                    reactionHistory.pop();
                }
                

                historyList.innerHTML = '';
                reactionHistory.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.innerHTML = `<i class="${item.icon}"></i> ${item.text}`;
                    historyList.appendChild(historyItem);
                });
            }

            elements.forEach(element => {
                element.addEventListener('dragstart', (e) => {
                    draggedElement = element;
                    element.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', element.dataset.element);
                });
                
                element.addEventListener('dragend', () => {
                    element.classList.remove('dragging');
                });
            });
            
          
            reactionCircle.addEventListener('dragover', (e) => {
                e.preventDefault();
                reactionCircle.classList.add('drop-zone-active');
            });
            
            reactionCircle.addEventListener('dragenter', (e) => {
                e.preventDefault();
                reactionCircle.classList.add('drop-zone-active');
            });
            
            reactionCircle.addEventListener('dragleave', () => {
                reactionCircle.classList.remove('drop-zone-active');
            });
            
            reactionCircle.addEventListener('drop', (e) => {
                e.preventDefault();
                reactionCircle.classList.remove('drop-zone-active');
                
                if (draggedElement && elementsInCircle.length < 2) {
        
                    const elementCopy = draggedElement.cloneNode(true);
                    elementCopy.classList.remove('dragging');
                    elementCopy.classList.add('dynamic-element');
                    elementCopy.style.position = 'absolute';
                    elementCopy.style.cursor = 'default';
  
                    const angle = Math.random() * Math.PI * 2;
                    const radius = reactionCircle.offsetWidth / 3.5;
                    const x = Math.cos(angle) * radius;
                    const y = Math.sin(angle) * radius;
                    
                    elementCopy.style.left = `calc(50% + ${x}px)`;
                    elementCopy.style.top = `calc(50% + ${y}px)`;
                    elementCopy.style.transform = 'translate(-50%, -50%)';
                    
                    reactionCircle.appendChild(elementCopy);
                    elementsInCircle.push(draggedElement.dataset.element);
                    updateElementCounter();

                    addHistory(`æ·»åŠ äº†: ${getElementName(draggedElement.dataset.element)}`, draggedElement.querySelector('i').className);
                    
            
                    if (elementsInCircle.length === 2) {
                        setTimeout(triggerReaction, 500);
                    }
                }
            });
            

            function getElementName(elementType) {
                const names = {
                    'fire': 'ç«ç„°', 
                    'water': 'æ°´æµ',
                    'electric': 'é›·ç”µ',
                    'wind': 'é£',
                    'earth': 'åœŸå£¤',
                    'ice': 'å†°é›ª',
                    'light': 'é˜³å…‰',
                    'plant': 'æ¤ç‰©',
                    'lava': 'ç†”å²©',
                    'sand': 'æ²™å°˜',
                    'ocean': 'æµ·æ´‹',
                    'mineral': 'çŸ¿ç‰©',
                    'metal': 'é‡‘å±',
                    'cloud': 'äº‘æœµ',
                    'storm': 'é£æš´',
                    'crystal': 'æ°´æ™¶'
                };
                return names[elementType] || elementType;
            }
            

            function triggerReaction() {
                const [elem1, elem2] = elementsInCircle;
                const reaction = getReaction(elem1, elem2);

                popupEmoji.innerHTML = reaction.emoji;
                popupEmoji.style.color = reaction.color;
                popupText.textContent = reaction.result;
                popupText.style.color = reaction.color;
                reactionPopup.classList.add('active');
                
    
                if (reaction.specialEffect) {
                    applySpecialEffect(reaction.specialEffect);
                }
                

                createParticles(reaction.color, reaction.particleCount || 150);
  
                addHistory(`${getElementName(elem1)} + ${getElementName(elem2)} = ${reaction.result}`, "fas fa-atom");
 
                setTimeout(() => {
                    reactionPopup.classList.remove('active');
     
                 
                    document.querySelectorAll('.reaction-circle .dynamic-element, .reaction-circle .particle').forEach(el => {
                        el.remove();
                    });
                    
                    elementsInCircle = [];
                    updateElementCounter();
                }, 3000);
            }
            

            function getReaction(elem1, elem2) {
     
                const elements = [elem1, elem2].sort();
                const key = elements.join(',');
                
          
                const reactions = {
          
                    'fire,water': { result: 'é«˜å‹è’¸æ±½', emoji: 'ğŸ’¨ğŸ”¥', color: '#a8e6cf', particleCount: 170 },
                    'fire,wind': { result: 'ç«ç„°é£æš´', emoji: 'ğŸ”¥ğŸŒªï¸', color: '#ff8a5c', particleCount: 190 },
                    'fire,earth': { result: 'ç†”å²©å²©çŸ³', emoji: 'ğŸŒ‹', color: '#ff6b6b', particleCount: 180 },
                    'fire,ice': { result: 'æ¸©æš–æ°´é›¾', emoji: 'ğŸ’§â˜ï¸', color: '#4facfe', particleCount: 160 },
                    'fire,light': { result: 'æ¸©æš–é˜³å…‰', emoji: 'â˜€ï¸ğŸ”¥', color: '#ffd700', particleCount: 220 },
                    'fire,plant': { result: 'æ£®æ—ç«ç¾', emoji: 'ğŸ”¥ğŸŒ²', color: '#ff8c00', particleCount: 190 },
                    'fire,lava': { result: 'ç«å±±å–·å‘', emoji: 'ğŸŒ‹ğŸŒ‹', color: '#f46b45', particleCount: 250 },
                    'fire,sand': { result: 'ç»ç’ƒå½¢æˆ', emoji: 'ğŸ”ğŸ”¥', color: '#ff8a00', particleCount: 180 },
                    'fire,ocean': { result: 'æµ·æ´‹è’¸å‘', emoji: 'ğŸ”¥ğŸŒŠ', color: '#1a2980', particleCount: 200 },
                    'fire,mineral': { result: 'ç†”å²©çŸ¿è„‰', emoji: 'ğŸ”¥ğŸ’', color: '#ff512f', particleCount: 190 },
                    'fire,metal': { result: 'ç†”åŒ–é‡‘å±', emoji: 'ğŸ”¥ğŸ¥«', color: '#ff8c00', particleCount: 180 },
                    'fire,cloud': { result: 'é«˜æ¸©è’¸æ±½äº‘', emoji: 'ğŸ”¥â˜ï¸', color: '#ff9a8b', particleCount: 180 },
                    'fire,storm': { result: 'ç«ç„°é›·æš´', emoji: 'ğŸ”¥â›ˆï¸', color: '#ff6b6b', particleCount: 220 },
                    'fire,crystal': { result: 'ç†”å²©æ°´æ™¶', emoji: 'ğŸ”¥ğŸ’', color: '#f46b45', particleCount: 200 },
                    
                    'water,wind': { result: 'æ±¹æ¶Œæµ·æµª', emoji: 'ğŸŒŠğŸ’¨', color: '#2f80ed', particleCount: 180 },
                    'water,earth': { result: 'è‚¥æ²ƒæ³¥åœŸ', emoji: 'ğŸŒ±ğŸ’§', color: '#795548', particleCount: 150 },
                    'water,ice': { result: 'å†°æ°´æ··åˆç‰©', emoji: 'ğŸ§ŠğŸ’§', color: '#4facfe', particleCount: 160 },
                    'water,light': { result: 'ç»šä¸½å½©è™¹', emoji: 'ğŸŒˆğŸ’§', color: '#ff6b6b', particleCount: 200 },
                    'water,plant': { result: 'èŒ‚ç››ç”Ÿé•¿', emoji: 'ğŸŒ´ğŸ’§', color: '#0ba360', particleCount: 180 },
                    'water,lava': { result: 'ç«å±±å²©çŸ³', emoji: 'ğŸŒŠğŸ”¥', color: '#f46b45', particleCount: 200 },
                    'water,sand': { result: 'æ¹¿æ¶¦æ²™åœ°', emoji: 'ğŸ–ï¸ğŸ’§', color: '#f5d76e', particleCount: 160 },
                    'water,ocean': { result: 'å¹¿é˜”æµ·æ´‹', emoji: 'ğŸ’§ğŸŒŠ', color: '#1a2980', particleCount: 210 },
                    'water,mineral': { result: 'çŸ¿ç‰©æº¶è§£', emoji: 'ğŸ’§ğŸ’', color: '#8e2de2', particleCount: 180 },
                    'water,metal': { result: 'é‡‘å±é”ˆèš€', emoji: 'ğŸ’§ğŸ§±', color: '#c0c0c0', particleCount: 170 },
                    'water,cloud': { result: 'ç§¯é›¨äº‘', emoji: 'ğŸ’§â˜ï¸', color: '#bdc3c7', particleCount: 170 },
                    'water,storm': { result: 'æš´é£é›¨', emoji: 'ğŸ’§â›ˆï¸', color: '#373B44', particleCount: 220 },
                    'water,crystal': { result: 'æ°´æ™¶ä½“', emoji: 'ğŸ’§ğŸ’', color: '#0cebeb', particleCount: 190 },
                    
                    'wind,earth': { result: 'æ²™å°˜é£æš´', emoji: 'ğŸŒªï¸ğŸœï¸', color: '#f5d76e', particleCount: 170 },
                    'wind,ice': { result: 'å¯’å†·æ°”æµ', emoji: 'â„ï¸ğŸŒ¬ï¸', color: '#a8e063', particleCount: 160 },
                    'wind,light': { result: 'æ™´ç©ºä¸‡é‡Œ', emoji: 'ğŸŒğŸ’¨', color: '#56ab2f', particleCount: 210 },
                    'wind,plant': { result: 'ç§å­ä¼ æ’­', emoji: 'ğŸŒ±ğŸ’¨', color: '#56ab2f', particleCount: 170 },
                    'wind,lava': { result: 'ç«å±±ç°æ‰©æ•£', emoji: 'ğŸ’¨ğŸŒ‹', color: '#616161', particleCount: 190 },
                    'wind,sand': { result: 'æ²™å°˜æš´', emoji: 'ğŸ’¨ğŸœï¸', color: '#d4c17f', particleCount: 170 },
                    'wind,ocean': { result: 'å·¨å¤§æµ·æµª', emoji: 'ğŸ’¨ğŸŒŠ', color: '#1a2980', particleCount: 200 },
                    'wind,mineral': { result: 'é£èš€çŸ¿ç‰©', emoji: 'ğŸ’¨ğŸ’', color: '#8e2de2', particleCount: 180 },
                    'wind,metal': { result: 'é£èš€é‡‘å±', emoji: 'ğŸ’¨ğŸ§±', color: '#c0c0c0', particleCount: 170 },
                    'wind,cloud': { result: 'å¿«é€Ÿç§»åŠ¨çš„äº‘', emoji: 'â˜ï¸ğŸ’¨', color: '#ecf0f1', particleCount: 160 },
                    'wind,storm': { result: 'é£“é£', emoji: 'ğŸŒªï¸ğŸŒ€', color: '#4286f4', particleCount: 250 },
                    'wind,crystal': { result: 'æ°´æ™¶é£é“ƒ', emoji: 'ğŸ’¨ğŸ’', color: '#0cebeb', particleCount: 180 },
                    
                    'earth,ice': { result: 'å†»åœŸè‹”åŸ', emoji: 'â„ï¸ğŸŒ', color: '#4ca1af', particleCount: 150 },
                    'earth,light': { result: 'æ°´æ™¶å½¢æˆ', emoji: 'ğŸ’â›ï¸', color: '#a8e063', particleCount: 190 },
                    'earth,plant': { result: 'æ£®æ—ç”Ÿæ€', emoji: 'ğŸŒ»ğŸŒ', color: '#3cba92', particleCount: 180 },
                    'earth,lava': { result: 'ç«å±±åœ°è²Œ', emoji: 'ğŸŒ‹ğŸ”ï¸', color: '#ff8a00', particleCount: 210 },
                    'earth,sand': { result: 'æ²™æ¼ å½¢æˆ', emoji: 'ğŸŒğŸœï¸', color: '#d4c17f', particleCount: 180 },
                    'earth,ocean': { result: 'æµ·å²¸ä¾µèš€', emoji: 'ğŸï¸ğŸŒ', color: '#26d0ce', particleCount: 190 },
                    'earth,mineral': { result: 'å®çŸ³çŸ¿', emoji: 'ğŸŒğŸ’', color: '#4a00e0', particleCount: 200 },
                    'earth,metal': { result: 'é‡‘å±çŸ¿çŸ³', emoji: 'ğŸŒğŸ§±', color: '#c0c0c0', particleCount: 180 },
                    'earth,cloud': { result: 'é«˜å±±äº‘é›¾', emoji: 'ğŸŒâ˜ï¸', color: '#bdc3c7', particleCount: 170 },
                    'earth,storm': { result: 'æ³¥çŸ³æµ', emoji: 'ğŸŒâ›ˆï¸', color: '#795548', particleCount: 210 },
                    'earth,crystal': { result: 'æ°´æ™¶çŸ¿è„‰', emoji: 'ğŸŒğŸ’', color: '#20e3b2', particleCount: 200 },
                    
                    'ice,light': { result: 'å†°æ™¶åå°„', emoji: 'ğŸ”·â„ï¸', color: '#4ca1af', particleCount: 180 },
                    'ice,plant': { result: 'éœœå†»æ¤ç‰©', emoji: 'â„ï¸ğŸŒ¿', color: '#4facfe', particleCount: 170 },
                    'ice,lava': { result: 'é»‘æ›œçŸ³', emoji: 'ğŸª¨â„ï¸', color: '#0f0c29', particleCount: 180 },
                    'ice,sand': { result: 'å†»æ²™', emoji: 'â„ï¸ğŸœï¸', color: '#f5d76e', particleCount: 170 },
                    'ice,ocean': { result: 'å†°å±±å½¢æˆ', emoji: 'ğŸ”ï¸â„ï¸', color: '#4facfe', particleCount: 180 },
                    'ice,mineral': { result: 'å†°å°çŸ¿ç‰©', emoji: 'â„ï¸ğŸ’', color: '#8e2de2', particleCount: 180 },
                    'ice,metal': { result: 'å†°å†·é‡‘å±', emoji: 'â„ï¸ğŸ§±', color: '#c0c0c0', particleCount: 170 },
                    'ice,cloud': { result: 'å†°é›¹', emoji: 'â„ï¸â˜ï¸', color: '#a4b0be', particleCount: 180 },
                    'ice,storm': { result: 'å†°é£æš´', emoji: 'â„ï¸â›ˆï¸', color: '#4ca1af', particleCount: 210 },
                    'ice,crystal': { result: 'å†°æ™¶', emoji: 'â„ï¸ğŸ’', color: '#4facfe', particleCount: 190 },
                    
                    'light,plant': { result: 'å…‰åˆä½œç”¨', emoji: 'ğŸŒ¿â˜€ï¸', color: '#a8e063', particleCount: 200 },
                    'light,lava': { result: 'ç‚½çƒ­ç†”å²©', emoji: 'â˜€ï¸ğŸŒ‹', color: '#ff8c00', particleCount: 200 },
                    'light,sand': { result: 'æ²™æ¼ çƒ­æµª', emoji: 'â˜€ï¸ğŸœï¸', color: '#f5d76e', particleCount: 190 },
                    'light,ocean': { result: 'æµ·æ´‹åå…‰', emoji: 'â˜€ï¸ğŸŒŠ', color: '#1a2980', particleCount: 200 },
                    'light,mineral': { result: 'å®çŸ³å…‰æ³½', emoji: 'â˜€ï¸ğŸ’', color: '#8e2de2', particleCount: 190 },
                    'light,metal': { result: 'é‡‘å±åå…‰', emoji: 'â˜€ï¸ğŸ§±', color: '#ffd700', particleCount: 180 },
                    'light,cloud': { result: 'ç©¿é€äº‘å±‚çš„å…‰', emoji: 'â˜€ï¸â˜ï¸', color: '#ffd700', particleCount: 190 },
                    'light,storm': { result: 'é£æš´åçš„é˜³å…‰', emoji: 'â˜€ï¸â›ˆï¸', color: '#f5af19', particleCount: 210 },
                    'light,crystal': { result: 'å½©è™¹æŠ˜å°„', emoji: 'ğŸ’ğŸŒˆ', color: '#0cebeb', particleCount: 220 },
                    
                    'plant,lava': { result: 'ç«å±±æ¤ç‰©', emoji: 'ğŸŒ¿ğŸŒ‹', color: '#ff8c00', particleCount: 190 },
                    'plant,sand': { result: 'æ²™æ¼ æ¤ç‰©', emoji: 'ğŸŒ¿ğŸœï¸', color: '#0ba360', particleCount: 180 },
                    'plant,ocean': { result: 'æµ·æ´‹æ¤ç‰©', emoji: 'ğŸŒ¿ğŸŒŠ', color: '#0ba360', particleCount: 190 },
                    'plant,mineral': { result: 'çŸ¿ç‰©è‚¥æ–™', emoji: 'ğŸŒ¿ğŸ’', color: '#3cba92', particleCount: 180 },
                    'plant,metal': { result: 'é‡‘å±è—¤è”“', emoji: 'ğŸŒ¿ğŸ§±', color: '#0ba360', particleCount: 180 },
                    'plant,cloud': { result: 'é›¨æ—é›¾æ°”', emoji: 'ğŸŒ¿â˜ï¸', color: '#0ba360', particleCount: 180 },
                    'plant,storm': { result: 'é£æš´åçš„æ–°èŠ½', emoji: 'ğŸŒ¿â›ˆï¸', color: '#0ba360', particleCount: 200 },
                    'plant,crystal': { result: 'æ°´æ™¶æ¤ç‰©', emoji: 'ğŸŒ¿ğŸ’', color: '#20e3b2', particleCount: 190 },
                    
                    'lava,sand': { result: 'ç«å±±ç»ç’ƒ', emoji: 'ğŸŒ‹ğŸœï¸', color: '#f5d76e', particleCount: 190 },
                    'lava,ocean': { result: 'æµ·åº•ç«å±±', emoji: 'ğŸŒ‹ğŸŒŠ', color: '#1a2980', particleCount: 210 },
                    'lava,mineral': { result: 'ç†”å²©çŸ¿è„‰', emoji: 'ğŸŒ‹ğŸ’', color: '#f46b45', particleCount: 200 },
                    'lava,metal': { result: 'ç†”èé‡‘å±', emoji: 'ğŸŒ‹ğŸ§±', color: '#ff8a00', particleCount: 190 },
                    'lava,cloud': { result: 'ç«å±±ç°äº‘', emoji: 'ğŸŒ‹â˜ï¸', color: '#616161', particleCount: 190 },
                    'lava,storm': { result: 'ç«å±±é›·æš´', emoji: 'ğŸŒ‹â›ˆï¸', color: '#f46b45', particleCount: 220 },
                    'lava,crystal': { result: 'ç†”å²©æ°´æ™¶', emoji: 'ğŸŒ‹ğŸ’', color: '#f46b45', particleCount: 200 },
                    
                    'sand,ocean': { result: 'æ²™æ»©', emoji: 'ğŸœï¸ğŸŒŠ', color: '#f5d76e', particleCount: 180 },
                    'sand,mineral': { result: 'çŸ¿ç‰©æ²™', emoji: 'ğŸœï¸ğŸ’', color: '#d4c17f', particleCount: 180 },
                    'sand,metal': { result: 'æ²™åŒ–é‡‘å±', emoji: 'ğŸœï¸ğŸ§±', color: '#d4c17f', particleCount: 170 },
                    'sand,cloud': { result: 'æ²™å°˜äº‘', emoji: 'ğŸœï¸â˜ï¸', color: '#d4c17f', particleCount: 170 },
                    'sand,storm': { result: 'æ²™å°˜æš´', emoji: 'ğŸœï¸â›ˆï¸', color: '#d4c17f', particleCount: 200 },
                    'sand,crystal': { result: 'æ²™æ™¶', emoji: 'ğŸœï¸ğŸ’', color: '#f5d76e', particleCount: 180 },
                    
                    'ocean,mineral': { result: 'æµ·æ´‹çŸ¿ç‰©', emoji: 'ğŸŒŠğŸ’', color: '#1a2980', particleCount: 190 },
                    'ocean,metal': { result: 'æµ·æ°´è…èš€', emoji: 'ğŸŒŠğŸ§±', color: '#1a2980', particleCount: 180 },
                    'ocean,cloud': { result: 'æµ·æ´‹é›¾æ°”', emoji: 'ğŸŒŠâ˜ï¸', color: '#1a2980', particleCount: 180 },
                    'ocean,storm': { result: 'æµ·æ´‹é£æš´', emoji: 'ğŸŒŠâ›ˆï¸', color: '#1a2980', particleCount: 220 },
                    'ocean,crystal': { result: 'æµ·æ´‹æ°´æ™¶', emoji: 'ğŸŒŠğŸ’', color: '#0cebeb', particleCount: 190 },
                    
                    'mineral,metal': { result: 'åˆé‡‘', emoji: 'ğŸ§±ğŸ’', color: '#c0c0c0', particleCount: 180 },
                    'mineral,cloud': { result: 'çŸ¿ç‰©äº‘', emoji: 'ğŸ’â˜ï¸', color: '#8e2de2', particleCount: 180 },
                    'mineral,storm': { result: 'é£æš´çŸ¿ç‰©', emoji: 'ğŸ’â›ˆï¸', color: '#8e2de2', particleCount: 200 },
                    'mineral,crystal': { result: 'çŸ¿ç‰©ç»“æ™¶', emoji: 'ğŸ’ğŸ’', color: '#8e2de2', particleCount: 190 },
                    
                    'metal,cloud': { result: 'é‡‘å±äº‘', emoji: 'ğŸ§±â˜ï¸', color: '#bdc3c7', particleCount: 170 },
                    'metal,storm': { result: 'é£æš´é‡‘å±', emoji: 'ğŸ§±â›ˆï¸', color: '#c0c0c0', particleCount: 190 },
                    'metal,crystal': { result: 'æ°´æ™¶é‡‘å±', emoji: 'ğŸ§±ğŸ’', color: '#0cebeb', particleCount: 190 },
                    
                    'cloud,storm': { result: 'é›·é›¨äº‘', emoji: 'â˜ï¸â›ˆï¸', color: '#373B44', particleCount: 210 },
                    'cloud,crystal': { result: 'æ°´æ™¶äº‘', emoji: 'ğŸ’â˜ï¸', color: '#0cebeb', particleCount: 190 },
                    
                    'storm,electric': { result: 'é›·æš´', emoji: 'âš¡â›ˆï¸', color: '#f5af19', particleCount: 230, specialEffect: 'lightning' },
                    'electric,wind': { result: 'å¸¦ç”µé£æš´', emoji: 'âš¡ğŸ’¨', color: '#00c3ff', particleCount: 200, specialEffect: 'lightning' },
                    'electric,earth': { result: 'åœ°ç”µæ•ˆåº”', emoji: 'âš¡ğŸŒ', color: '#834d9b', particleCount: 180 },
                    'electric,ice': { result: 'é™ç”µå†°æ™¶', emoji: 'âš¡â„ï¸', color: '#4facfe', particleCount: 190 },
                    'electric,plant': { result: 'ç”Ÿç‰©ç”µ', emoji: 'âš¡ğŸŒ¿', color: '#0ba360', particleCount: 180, specialEffect: 'lightning' },
                    'electric,lava': { result: 'ç”µç£ç†”å²©', emoji: 'âš¡ğŸŒ‹', color: '#f46b45', particleCount: 200, specialEffect: 'lightning' },
                    'electric,sand': { result: 'æ²™å°˜ç”µè·', emoji: 'âš¡ğŸœï¸', color: '#f5d76e', particleCount: 180 },
                    'electric,ocean': { result: 'æµ·æ´‹é—ªç”µ', emoji: 'âš¡ğŸŒŠ', color: '#1a2980', particleCount: 210, specialEffect: 'lightning' },
                    'electric,mineral': { result: 'çŸ¿ç‰©ç”µè·', emoji: 'âš¡ğŸ’', color: '#8e2de2', particleCount: 190, specialEffect: 'lightning' },
                    'electric,metal': { result: 'ç”µç£æ•ˆåº”', emoji: 'âš¡ğŸ§²', color: '#00c3ff', particleCount: 200, specialEffect: 'lightning' },
                    'electric,cloud': { result: 'é—ªç”µäº‘', emoji: 'âš¡â˜ï¸', color: '#f5af19', particleCount: 190, specialEffect: 'lightning' },
                    'electric,crystal': { result: 'èƒ½é‡æ°´æ™¶', emoji: 'âš¡ğŸ’', color: '#29ffc6', particleCount: 230, specialEffect: 'lightning' },
                    'electric,light': { result: 'æå…‰', emoji: 'âš¡ğŸŒˆ', color: '#56ab2f', particleCount: 220, specialEffect: 'lightning' },
                    'electric,fire': { result: 'è¶…çº§é—ªç”µ', emoji: 'âš¡ğŸ”¥', color: '#f5af19', particleCount: 260, specialEffect: 'lightning' },
                    'electric,water': { result: 'ç”µè§£æ°´', emoji: 'âš¡ğŸ’§', color: '#00c3ff', particleCount: 200, specialEffect: 'lightning' },
                    
                    'fire,fire': { result: 'æ›´å¤§ç«ç„°', emoji: 'ğŸ”¥ğŸ”¥', color: '#ff0000', particleCount: 240 },
                    'water,water': { result: 'æ›´å¤§æ°´ä½“', emoji: 'ğŸŒŠğŸŒŠ', color: '#2193b0', particleCount: 220 },
                    'wind,wind': { result: 'å¼ºçƒˆé£æš´', emoji: 'ğŸŒªï¸ğŸŒªï¸', color: '#56ab2f', particleCount: 230 },
                    'earth,earth': { result: 'é«˜å±±å½¢æˆ', emoji: 'ğŸ”ï¸ğŸ”ï¸', color: '#603813', particleCount: 210 },
                    'ice,ice': { result: 'å†°å·æ—¶æœŸ', emoji: 'â„ï¸â„ï¸', color: '#4ca1af', particleCount: 220 },
                    'plant,plant': { result: 'èŒ‚å¯†æ£®æ—', emoji: 'ğŸŒ²ğŸŒ³', color: '#0ba360', particleCount: 210 },
                    'lava,lava': { result: 'ç«å±±å–·å‘', emoji: 'ğŸŒ‹ğŸŒ‹', color: '#f46b45', particleCount: 250 },
                    'sand,sand': { result: 'å¹¿é˜”æ²™æ¼ ', emoji: 'ğŸœï¸ğŸœï¸', color: '#d4c17f', particleCount: 200 },
                    'ocean,ocean': { result: 'æ·±æµ·', emoji: 'ğŸŒŠğŸŒŠ', color: '#1a2980', particleCount: 230 },
                    'mineral,mineral': { result: 'çŸ¿è„‰', emoji: 'ğŸ’ğŸ’', color: '#8e2de2', particleCount: 210 },
                    'metal,metal': { result: 'åˆé‡‘å—', emoji: 'ğŸ§±ğŸ§±', color: '#c0c0c0', particleCount: 190 },
                    'cloud,cloud': { result: 'ä¹Œäº‘å¯†å¸ƒ', emoji: 'â˜ï¸â˜ï¸', color: '#2c3e50', particleCount: 180 },
                    'storm,storm': { result: 'è¶…çº§é£æš´', emoji: 'â›ˆï¸â›ˆï¸', color: '#373B44', particleCount: 260 },
                    'crystal,crystal': { result: 'æ°´æ™¶æ´çªŸ', emoji: 'ğŸ’ğŸ’', color: '#0cebeb', particleCount: 240 },
                    'electric,electric': { result: 'è¶…çº§é—ªç”µ', emoji: 'âš¡âš¡', color: '#f5af19', particleCount: 260, specialEffect: 'lightning' },
                    'light,light': { result: 'å¼ºçƒˆé˜³å…‰', emoji: 'â˜€ï¸â˜€ï¸', color: '#ffd700', particleCount: 250 }
                };
                
                return reactions[key] || { 
                    result: 'æœªçŸ¥ååº”', 
                    emoji: 'â“', 
                    color: '#cccccc', 
                    particleCount: 120
                };
            }
            
            // åº”ç”¨ç‰¹æ®Šæ•ˆæœ
            function applySpecialEffect(effectType) {
                const effectLayer = document.createElement('div');
                effectLayer.style.position = 'absolute';
                effectLayer.style.top = '0';
                effectLayer.style.left = '0';
                effectLayer.style.width = '100%';
                effectLayer.style.height = '100%';
                effectLayer.style.pointerEvents = 'none';
                effectLayer.style.zIndex = '15';
                
                switch(effectType) {
                    case 'lightning':
                        effectLayer.style.background = 'radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%)';
                        effectLayer.style.opacity = '0';
                        effectLayer.style.animation = 'lightning 0.3s 3';
                        break;
                        
                    case 'explosion':
                        effectLayer.style.background = 'radial-gradient(circle, rgba(255,100,0,0.8) 0%, transparent 70%)';
                        effectLayer.style.opacity = '0';
                        effectLayer.style.animation = 'explosion 0.8s forwards';
                        break;
                        
                    case 'grow':
                        effectLayer.style.background = 'radial-gradient(circle, rgba(0,255,100,0.6) 0%, transparent 70%)';
                        effectLayer.style.opacity = '1';
                        effectLayer.style.animation = 'grow 1s forwards';
                        break;
                }
                
                reactionCircle.appendChild(effectLayer);
                
                // ç§»é™¤æ•ˆæœ
                setTimeout(() => {
                    effectLayer.remove();
                }, 3000);
            }
            
            // åˆ›å»ºç²’å­æ•ˆæœ
            function createParticles(color, count = 150) {
                for (let i = 0; i < count; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    particle.style.background = color;
                    
                    // éšæœºä½ç½®åœ¨ååº”åœˆä¸­å¿ƒ
                    const centerX = reactionCircle.offsetWidth / 2;
                    const centerY = reactionCircle.offsetHeight / 2;
                    
                    particle.style.left = `${centerX}px`;
                    particle.style.top = `${centerY}px`;
                    
                    // éšæœºå¤§å°
                    const size = Math.random() * 18 + 6;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.opacity = '0.85';
                    
                    // éšæœºå½¢çŠ¶
                    if (Math.random() > 0.7) {
                        particle.style.borderRadius = '0';
                        particle.style.transform = `rotate(${Math.random() * 360}deg)`;
                    }
                    
                    reactionCircle.appendChild(particle);
                    
                    // ç²’å­åŠ¨ç”»
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 200 + 80;
                    const duration = Math.random() * 2 + 1;
                    
                    particle.animate([
                        { transform: 'translate(0, 0) scale(1)', opacity: 0.9 },
                        { transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0.2)`, opacity: 0 }
                    ], {
                        duration: duration * 1000,
                        easing: 'ease-out'
                    });
                    
                    // ç§»é™¤ç²’å­
                    setTimeout(() => {
                        particle.remove();
                    }, duration * 1000);
                }
            }
            
            // é‡ç½®æŒ‰é’®äº‹ä»¶
            resetBtn.addEventListener('click', initGame);
            
            // éŸ³æ•ˆæŒ‰é’®äº‹ä»¶
            soundBtn.addEventListener('click', () => {
                soundBtn.innerHTML = soundBtn.innerHTML.includes('up') 
                    ? '<i class="fas fa-volume-mute"></i>' 
                    : '<i class="fas fa-volume-up"></i>';
                soundBtn.style.background = soundBtn.style.background.includes('100, 255, 100') 
                    ? 'rgba(0, 0, 0, 0.6)' 
                    : 'rgba(100, 255, 100, 0.5)';
            });
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
            
            // æ·»åŠ èƒŒæ™¯åŠ¨ç”»æ•ˆæœ
            const backgroundAnimation = () => {
                const bg = document.querySelector('body');
                const colors = ['#0f2027', '#203a43', '#2c5364', '#0d324d'];
                let currentIndex = 0;
                
                setInterval(() => {
                    currentIndex = (currentIndex + 1) % colors.length;
                    const nextIndex = (currentIndex + 1) % colors.length;
                    
                    bg.style.background = `linear-gradient(135deg, ${colors[currentIndex]}, ${colors[nextIndex]})`;
                }, 8000);
            };
            
            backgroundAnimation();
        });
    </script>
</body>
</html>